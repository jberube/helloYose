<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Minesweeper</title>

	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

</head>

<body>
<section class='container'>
	<hgroup>
		<h1 id="title">Minesweeper</h1>
	</hgroup>
		  
	<div class="row">
		<section class='col-xs-12 col-sm-12 col-md-12 col-lg-12'>
			<table id="grid"></table>
		</section>
	</div>
</section>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>

<script>
	document.grid = [];

	var html = '';
	for ( var p = 1; p <= 8; p++ ) {
		html += '<tr>';
		for ( var n = 1; n <= 8; n++ ) {
			html += '<td id="cell-' + p + 'x' + n + '"></td>';
		}
		html += '</tr>';
	}
	$('#grid').html(html);
	
	function load(grid) {
		console.log('load', grid);
	}
	
	$('#grid td').on('click', function (event) {
		var id = $(event.target).attr('id');
		var n = parseInt(id.split('-')[1].split('x')[1], 10) - 1;
		var p = parseInt(id.split('-')[1].split('x')[0], 10) - 1;
		if (document.grid[p][n] === 'bomb') {
			$(event.target).addClass('lost');
		} else {
			$(event.target).addClass('safe');
			var bombs = 0
			for (var o = 0; o <= 8; n++) {
				var op = p -1 + (Math.floor(o / 3));
				var on = n -1 + (o % 3);
				if (document.grid[p][n] === 'bomb') bombs++;
			}
			$(event.target).text(bombs);
		}			
	});
</script>
</body>
</html>